(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"./MapStore2/web/client/components/import/ImportDragZone.jsx":function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var o=n("./node_modules/react/index.js"),a=n("./MapStore2/web/client/components/import/dragZone/DragZone.jsx"),s=n("./MapStore2/web/client/components/import/dragZone/Content.jsx"),l=n("./MapStore2/web/client/components/import/dragZone/enhancers/processFiles.jsx"),i=n("./MapStore2/web/client/components/import/dragZone/enhancers/useFiles.js"),c=n("./MapStore2/web/client/components/import/dragZone/enhancers/dropZoneHandlers.js"),p=n("./node_modules/recompose/es/Recompose.js").compose;e.exports=p(l,i,c)((function(e){var t=e.onClose,n=void 0===t?function(){}:t,l=e.onDrop,i=void 0===l?function(){}:l,c=e.onRef,p=void 0===c?function(){}:c,u=r(e,["onClose","onDrop","onRef"]);return o.createElement(a,{onClose:n,onDrop:i,onRef:p},o.createElement(s,u))}))},"./MapStore2/web/client/components/import/SelectShape.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react/index.js"),d=n("./node_modules/react-dropzone/dist/index.js"),y=n("./node_modules/react-spinkit/dist/index.js"),b=n("./MapStore2/web/client/utils/LocaleUtils.js"),h=n("./node_modules/jszip/lib/index.js"),g=n("./MapStore2/web/client/utils/FileUtils.js"),S=n("./node_modules/es6-promise/dist/es6-promise.js").Promise,x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(j,e);var t,n,r,f,x=(t=j,function(){var e,n=p(t);if(c()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return l(this,e)});function j(){var e;o(this,j);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return u(i(e=x.call.apply(x,[this].concat(n))),"tryUnzip",(function(e){return g.readZip(e).then((function(e){return(new h).loadAsync(e)}))})),u(i(e),"checkFileType",(function(t){return new S((function(n,r){var o=g.recognizeExt(t.name),a=t.type||g.MIME_LOOKUPS[o];"application/x-zip-compressed"===a||"application/zip"===a||"application/vnd.google-earth.kml+xml"===a||"application/vnd.google-earth.kmz"===a||"application/gpx+xml"===a?n():e.tryUnzip(t).then(n).catch(r)}))})),u(i(e),"checkfile",(function(t){S.all(t.map((function(t){return e.checkFileType(t)}))).then((function(){e.props.error&&e.props.onShapeError(null),e.props.onShapeChoosen(t)})).catch((function(){var t=b.getMessageById(e.context.messages,e.props.errorMessage);e.props.onShapeError(t)}))})),e}return n=j,(r=[{key:"render",value:function(){return this.props.loading?m.createElement("div",{className:"btn btn-info",style:{float:"center"}}," ",m.createElement(y,{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"})):m.createElement(d,{rejectClassName:"alert-danger",className:"alert alert-info",onDrop:this.checkfile},m.createElement("div",{className:"dropzone-content",style:{textAlign:"center"}},this.props.text))}}])&&a(n.prototype,r),f&&a(n,f),j}(m.Component);u(x,"propTypes",{text:f.oneOfType([f.string,f.element]),loading:f.bool,onShapeChoosen:f.func,onShapeError:f.func,error:f.oneOfType([f.string,f.element]),errorMessage:f.string}),u(x,"contextTypes",{messages:f.object}),u(x,"defaultProps",{text:"Drop or click to import a local Shape",onShapeChoosen:function(){},onShapeError:function(){},errorMessage:"shapefile.error.select"}),e.exports=x},"./MapStore2/web/client/components/import/ShapefileUploadAndStyle.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m,d=n("./node_modules/react/index.js"),y=n("./node_modules/prop-types/index.js"),b=n("./MapStore2/web/client/components/I18N/Message.jsx"),h=n("./MapStore2/web/client/utils/LayersUtils.js"),g=n("./MapStore2/web/client/utils/LocaleUtils.js"),S=n("./MapStore2/web/client/utils/FileUtils.js"),x=n("./node_modules/react-bootstrap/es/index.js"),j=x.Grid,v=x.Row,w=x.Col,E=x.Button,O=n("./node_modules/lodash/lodash.js").isString,P=n("./node_modules/react-widgets/lib/index.js").DropdownList,M=n("./MapStore2/web/client/components/import/SelectShape.jsx"),_=n("./node_modules/es6-promise/dist/es6-promise.js").Promise,k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(k,e);var t,r,y,S,x=(t=k,function(){var e,n=u(t);if(p()){var r=u(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function k(){var e;a(this,k);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(c(e=x.call.apply(x,[this].concat(n))),"state",{useDefaultStyle:!1,zoomOnShapefiles:!0}),f(c(e),"getGeometryType",(function(e){if(e&&"GeometryCollection"===e.type)return e.geometries.reduce((function(e,t){return t&&t.type===e?e:t.type}),null);if(e)switch(e.type){case"Polygon":case"MultiPolygon":return"Polygon";case"MultiLineString":case"LineString":return"LineString";case"Point":case"MultiPoint":return"Point";default:return null}return null})),f(c(e),"getGeomType",(function(t){return t&&t.features&&t.features[0].geometry?t.features.reduce((function(t,n){var r=e.getGeometryType(n.geometry);return t?r===t?t:"GeometryCollection":r}),null):null})),f(c(e),"renderError",(function(){return d.createElement(v,null,d.createElement("div",{style:{textAlign:"center"},className:"alert alert-danger"},d.createElement(b,{msgId:e.props.error})))})),f(c(e),"renderSuccess",(function(){return d.createElement(v,null,d.createElement("div",{style:{textAlign:"center",overflowWrap:"break-word"},className:"alert alert-success"},e.props.success))})),f(c(e),"renderStyle",(function(){return e.props.stylers[e.getGeomType(e.props.selected)]})),f(c(e),"renderDefaultStyle",(function(){return e.props.selected?d.createElement(v,null,d.createElement(w,{xs:2},d.createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:e.state.useDefaultStyle,onChange:function(t){e.setState({useDefaultStyle:t.target.checked})}})),d.createElement(w,{style:{paddingLeft:0,paddingTop:1},xs:10},d.createElement("label",null,d.createElement(b,{msgId:"shapefile.defaultStyle"}))),d.createElement(w,{xs:2},d.createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:e.state.zoomOnShapefiles,onChange:function(t){e.setState({zoomOnShapefiles:t.target.checked})}})),d.createElement(w,{style:{paddingLeft:0,paddingTop:1},xs:10},d.createElement("label",null,d.createElement(b,{msgId:"shapefile.zoom"})))):null})),f(c(e),"addShape",(function(t){e.props.shapeLoading(!0);var n=e.props.readFiles(t,e.props.onShapeError);_.all(n).then((function(t){var n=t.filter((function(e){return e[0]&&e[0].features&&0!==e[0].features.length||"Feature"===e[0].type}));n=n.reduce((function(t,n){return n?t.concat(n.map((function(t){return h.geoJSONToLayer(t,e.props.createId(t,n))}))):t}),[]),e.props.onShapeChoosen(n),e.props.shapeLoading(!1)})).catch((function(t){e.props.shapeLoading(!1);var n=t&&t.name||t||"";O(n)&&"SyntaxError"===n?e.props.onShapeError("shapefile.error.shapeFileParsingError"):e.props.onShapeError("shapefile.error.genericLoadError")}))})),f(c(e),"addToMap",(function(){e.props.shapeLoading(!0);var t=e.props.selected;e.state.useDefaultStyle||(t=m.toVectorStyle(t,e.props.shapeStyle)),_.resolve(e.props.addShapeLayer(t)).then((function(){e.props.shapeLoading(!1);var t=[];e.props.layers[0].bbox&&e.props.bbox&&(t=[Math.min(e.props.bbox[0],e.props.layers[0].bbox.bounds.minx),Math.min(e.props.bbox[1],e.props.layers[0].bbox.bounds.miny),Math.max(e.props.bbox[2],e.props.layers[0].bbox.bounds.maxx),Math.max(e.props.bbox[3],e.props.layers[0].bbox.bounds.maxy)]),e.state.zoomOnShapefiles&&(e.props.updateShapeBBox(t&&t.length?t:e.props.bbox),e.props.onZoomSelected(t&&t.length?t:e.props.bbox,"EPSG:4326")),e.props.onShapeSuccess(e.props.layers[0].name+g.getMessageById(e.context.messages,"shapefile.success")),e.props.onLayerAdded(e.props.selected)})).catch((function(){e.props.shapeLoading(!1),e.props.onShapeError("shapefile.error.genericLoadError")}))})),e}return r=k,(y=[{key:"UNSAFE_componentWillMount",value:function(){m=n("./MapStore2/web/client/utils/StyleUtils.js")(this.props.mapType)}},{key:"render",value:function(){var e=this;return d.createElement(j,{role:"body",style:{width:"300px"},fluid:!0},this.props.error?this.renderError():null,this.props.success?this.renderSuccess():null,d.createElement(v,{style:{textAlign:"center"}},this.props.selected?d.createElement(P,{data:this.props.layers,value:this.props.selected,onSelect:function(t){return e.props.onSelectLayer(t)},valueField:"id",textField:"name"}):d.createElement(M,o({},this.props.uploadOptions,{errorMessage:"shapefile.error.select",text:this.props.uploadMessage,onShapeChoosen:this.addShape,onShapeError:this.props.onShapeError}))),d.createElement(v,{style:{marginBottom:10}},this.state.useDefaultStyle?null:this.renderStyle()),this.renderDefaultStyle(),this.props.selected?d.createElement(v,null,d.createElement(w,{xsOffset:6,xs:3}," ",d.createElement(E,{bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){e.props.onShapeChoosen(null)}},this.props.cancelMessage)),d.createElement(w,{xs:3}," ",d.createElement(E,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:this.addToMap},this.props.addMessage))):null)}}])&&s(r.prototype,y),S&&s(r,S),k}(d.Component);f(k,"propTypes",{bbox:y.array,layers:y.array,selected:y.object,style:y.object,shapeStyle:y.object,readFiles:y.func,onShapeError:y.func,onShapeSuccess:y.func,onShapeChoosen:y.func,addShapeLayer:y.func,shapeLoading:y.func,onSelectLayer:y.func,onLayerAdded:y.func,onZoomSelected:y.func,updateShapeBBox:y.func,error:y.string,success:y.string,mapType:y.string,buttonSize:y.string,uploadMessage:y.object,cancelMessage:y.object,addMessage:y.object,stylers:y.object,uploadOptions:y.object,createId:y.func}),f(k,"contextTypes",{messages:y.object}),f(k,"defaultProps",{shapeLoading:function(){},readFiles:function(e,t){return e.map((function(e){var n=S.recognizeExt(e.name),r=e.type||S.MIME_LOOKUPS[n];return"application/vnd.google-earth.kml+xml"===r?S.readKml(e).then((function(e){return S.kmlToGeoJSON(e)})):"application/gpx+xml"===r?S.readKml(e).then((function(e){return S.gpxToGeoJSON(e)})):"application/vnd.google-earth.kmz"===r?S.readKmz(e).then((function(e){return S.kmlToGeoJSON(e)})):"application/x-zip-compressed"===r||"application/zip"===r?S.readZip(e).then((function(e){return S.checkShapePrj(e).then((function(n){return n.length>0&&t("shapefile.error.missingPrj"),S.shpToGeoJSON(e)}))})):null}))},mapType:"leaflet",stylers:{},buttonSize:"small",uploadOptions:{},createId:function(){},bbox:null}),e.exports=k},"./MapStore2/web/client/components/import/dragZone/Content.jsx":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.compose,a=r.branch,s=r.renderComponent,l=n("./MapStore2/web/client/components/import/dragZone/LoadingContent.jsx"),i=n("./MapStore2/web/client/components/import/dragZone/ErrorContent.jsx"),c=n("./MapStore2/web/client/components/import/dragZone/NormalContent.jsx");e.exports=o(a((function(e){return e.loading}),s(l)),a((function(e){return e.error}),s(i)))(c)},"./MapStore2/web/client/components/import/dragZone/DragZone.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-dropzone/dist/index.js"),a=n("./node_modules/react-bootstrap/es/index.js"),s=a.Button,l=a.Glyphicon,i=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx")(s);e.exports=function(e){var t=e.accept,n=e.children,a=e.onRef,s=void 0===a?function(){}:a,c=e.onClose,p=void 0===c?function(){}:c,u=e.onDrop,f=void 0===u?function(){}:u,m=e.onDragEnter,d=void 0===m?function(){}:m,y=e.onDragLeave,b=void 0===y?function(){}:y;return r.createElement(o,{disableClick:!0,ref:s,id:"DRAGDROP_IMPORT_ZONE",style:{position:"relative",height:"100%"},accept:t,onDrop:f,onDragEnter:d,onDragLeave:b},r.createElement("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0,background:"rgba(0,0,0,0.75)",color:"#fff",zIndex:2e3,display:"flex",textAlign:"center"}},r.createElement(i,{style:{border:"none",background:"transparent",color:"white",fontSize:35,top:0,right:0,position:"absolute"},onClick:function(){return p()}},r.createElement(l,{glyph:"1-close"})),r.createElement("div",{style:{margin:"auto",maxWidth:550}},n)))}},"./MapStore2/web/client/components/import/dragZone/DropText.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js").Button,a=n("./MapStore2/web/client/components/I18N/Message.jsx"),s=n("./MapStore2/web/client/components/I18N/HTML.jsx");e.exports=function(e){var t=e.openFileDialog;return r.createElement("div",null,r.createElement(s,{msgId:"mapImport.dropZone.heading"}),t?r.createElement(o,{bsStyle:"primary",onClick:t},r.createElement(a,{msgId:"mapImport.dropZone.selectFiles"})):null,r.createElement("br",null),r.createElement("br",null),r.createElement(s,{msgId:"mapImport.dropZone.infoSupported"}),r.createElement("hr",null),r.createElement(s,{msgId:"mapImport.dropZone.note"}))}},"./MapStore2/web/client/components/import/dragZone/ErrorContent.jsx":function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var o=n("./node_modules/react/index.js"),a=n("./node_modules/react-bootstrap/es/index.js"),s=a.Glyphicon,l=a.Alert,i=n("./MapStore2/web/client/components/import/dragZone/DropText.jsx"),c=n("./MapStore2/web/client/components/I18N/Message.jsx"),p={FILE_NOT_SUPPORTED:o.createElement(c,{msgId:"mapImport.errors.fileNotSupported"}),PROJECTION_NOT_SUPPORTED:o.createElement(c,{msgId:"mapImport.errors.projectionNotSupported"})};e.exports=function(e){var t=e.error,n=r(e,["error"]);return o.createElement("div",{style:{margin:"auto",maxWidth:550}},o.createElement("div",null,o.createElement(s,{glyph:"exclamation-mark",style:{fontSize:80}})),o.createElement("h5",null,function(e){return e?p[e.message]||p[e]||o.createElement("span",null,o.createElement(c,{msgId:"mapImport.errors.unknownError"}),":",o.createElement(l,{bsStyle:"warning"},e.message)):o.createElement(c,{msgId:"mapImport.errors.unknownError"})}(t)),o.createElement(i,n))}},"./MapStore2/web/client/components/import/dragZone/LoadingContent.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/misc/Loader.jsx"),a=n("./MapStore2/web/client/components/I18N/Message.jsx");e.exports=function(){return r.createElement("div",{style:{margin:"auto",maxWidth:550}},r.createElement(o,{size:80,color:"#ffffff",style:{margin:"auto"}}),r.createElement("h4",null,r.createElement(a,{msgId:"loading"})))}},"./MapStore2/web/client/components/import/dragZone/NormalContent.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js").Glyphicon,a=n("./MapStore2/web/client/components/import/dragZone/DropText.jsx");e.exports=function(e){return r.createElement("div",null,r.createElement("div",null,r.createElement(o,{glyph:"upload",style:{fontSize:80}})),r.createElement(a,e))}},"./MapStore2/web/client/components/import/dragZone/enhancers/dropZoneHandlers.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.compose,a=r.withHandlers;e.exports=o(a((function(){var e=null;return{onRef:function(){return function(t){return e=t}},openFileDialog:function(){return function(){return e.open()}}}})))},"./MapStore2/web/client/components/import/dragZone/enhancers/processFiles.jsx":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n("./node_modules/rxjs/Rx.js"),c=n("./node_modules/recompose/es/Recompose.js"),p=c.compose,u=c.mapPropsStream,f=c.createEventHandler,m=n("./node_modules/lodash/lodash.js"),d=m.get,y=m.some,b=m.every,h=n("./MapStore2/web/client/utils/FileUtils.js"),g=n("./MapStore2/web/client/utils/LayersUtils.js"),S=n("./MapStore2/web/client/utils/ConfigUtils.js"),x=n("./node_modules/jszip/lib/index.js"),j=function(e){return new Promise((function(t,n){var r=h.recognizeExt(e.name),o=e.type||h.MIME_LOOKUPS[r];"application/x-zip-compressed"===o||"application/zip"===o||"application/vnd.google-earth.kml+xml"===o||"application/vnd.google-earth.kmz"===o||"application/gpx+xml"===o||"application/json"===o||"application/vnd.wmc"===o?t(e):function(e){return h.readZip(e).then((function(e){return(new x).loadAsync(e)}))}(e).then((function(){return t(e)})).catch((function(){return n(new Error("FILE_NOT_SUPPORTED"))}))}))};e.exports=p(u((function(e){var t=f(),n=t.handler,o=t.stream,a=f(),l=a.handler,c=a.stream;return e.combineLatest(o.switchMap((function(e){return i.Observable.from(e).flatMap(j).flatMap(function(e){return function(t){var n=h.recognizeExt(t.name),r=t.type||h.MIME_LOOKUPS[n],o=S.getConfigProp("projectionDefs")||[],a=(o.length&&o.map((function(e){return e.code}))||[]).concat(["EPSG:4326","EPSG:3857","EPSG:900913"]);return"application/vnd.google-earth.kml+xml"===r?h.readKml(t).then((function(e){return h.kmlToGeoJSON(e)})):"application/gpx+xml"===r?h.readKml(t).then((function(e){return h.gpxToGeoJSON(e,t.name)})):"application/vnd.google-earth.kmz"===r?h.readKmz(t).then((function(e){return h.kmlToGeoJSON(e)})):"application/x-zip-compressed"===r||"application/zip"===r?h.readZip(t).then((function(n){return h.checkShapePrj(n).then((function(r){r.length>0&&e({type:"warning",filename:t.name,message:"shapefile.error.missingPrj"});var o=h.shpToGeoJSON(n).map((function(e){return s({},e,{filename:t.name})}));if(y(o,(function(e){return!!d(e,"map.projection")}))){var l=o.filter((function(e){return!!d(e,"map.projection")}));if(b(l,(function(e){return a.includes(e.map.projection)})))return o;throw new Error("PROJECTION_NOT_SUPPORTED")}return o}))})):"application/json"===r?h.readJson(t).then((function(e){var n=d(e,"map.projection");if(n){if(a.includes(n))return[s({},e,{fileName:t.name})];throw new Error("PROJECTION_NOT_SUPPORTED")}return[s({},e,{fileName:t.name})]})):"application/vnd.wmc"===r?h.readWMC(t).then((function(e){return[e]})):null}}(l)).reduce((function(e,t){return{layers:(e.layers||[]).concat(t.filter((function(e){return function(e){return e&&e.features&&0!==e.features.length}(e)})).map((function(e){return s({},g.geoJSONToLayer(e),{filename:e.filename})}))),maps:(e.maps||[]).concat(t.filter((function(e){return function(e){return e&&e.version&&e.map}(e)})))}}),{}).map((function(e){return{loading:!1,files:e}})).catch((function(e){return i.Observable.of({error:e,loading:!1})})).startWith({loading:!0})})).startWith({}),(function(e,t){return s({},e,{},t,{onDrop:n})})).combineLatest(c.scan((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(r(e),[t])}),[]).startWith(void 0),(function(e,t){return s({},e,{warnings:t})}))})))},"./MapStore2/web/client/components/import/dragZone/enhancers/useFiles.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n("./node_modules/recompose/es/Recompose.js"),l=s.compose,i=s.mapPropsStream,c=s.withHandlers;e.exports=l(c({useFiles:function(e){var t=e.currentMap,n=e.loadMap,r=void 0===n?function(){}:n,a=e.onClose,s=void 0===a?function(){}:a,l=e.setLayers,i=void 0===l?function(){}:l;return function(e,n){var a=e.layers,l=void 0===a?[]:a,c=e.maps,p=(void 0===c?[]:c)[0];if(p){var u=t.zoom,f=t.center;r(o({},p,{map:o({},p.map,{zoom:p.map.zoom||u,center:p.map.center||f})}),null,!p.map.zoom&&(p.map.bbox||{bounds:p.map.maxExtent}))}l.length>0?i(l,n):p&&s()}}}),i((function(e){return e.merge(e.distinctUntilKeyChanged("files").filter((function(e){return e.files})).do((function(e){var t=e.files,n=e.useFiles,r=void 0===n?function(){}:n,o=e.warnings;return r(t,void 0===o?[]:o)})).ignoreElements())})))},"./MapStore2/web/client/components/import/style/StylePanel.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d,y=n("./node_modules/prop-types/index.js"),b=n("./node_modules/react/index.js"),h=n("./MapStore2/web/client/components/I18N/Message.jsx"),g=n("./MapStore2/web/client/utils/LocaleUtils.js"),S=n("./node_modules/react-bootstrap/es/index.js"),x=S.Grid,j=S.Row,v=S.Col,w=S.Button,E=S.Alert,O=S.ButtonToolbar,P=n("./node_modules/es6-promise/dist/es6-promise.js").Promise,M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(M,e);var t,r,a,y,S=(t=M,function(){var e,n=f(t);if(u()){var r=f(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return c(this,e)});function M(){var e;s(this,M);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m(p(e=S.call.apply(S,[this].concat(n))),"state",{useDefaultStyle:!1,zoomOnShapefiles:!0,initialLayers:[]}),m(p(e),"getGeometryType",(function(e){if(e&&"GeometryCollection"===e.type)return e.geometries.reduce((function(e,t){return t&&t.type===e?e:t.type}),null);if(e)switch(e.type){case"Polygon":case"MultiPolygon":return"Polygon";case"MultiLineString":case"LineString":return"LineString";case"Point":case"MultiPoint":return"Point";default:return null}return null})),m(p(e),"getGeomType",(function(t){return t&&t.features&&t.features[0].geometry?t.features.reduce((function(t,n){var r=e.getGeometryType(n.geometry);return t?r===t?t:"GeometryCollection":r}),null):null})),m(p(e),"renderError",(function(){return e.props.errors&&e.props.errors.filter((function(t){return(t.filename||t.name)&&e.props.layers&&e.props.layers[0]&&(e.props.layers[0].filename===t.filename||e.props.layers[0].name===t.name)})).map((function(e){return b.createElement(j,{key:e&&e.name+e.message},b.createElement(E,{bsStyle:e.type,style:{textAlign:"center"}},b.createElement(h,{msgId:e.message})))}))})),m(p(e),"renderSuccess",(function(){return b.createElement(j,null,b.createElement("div",{style:{textAlign:"center",overflowWrap:"break-word"},className:"alert alert-success"},e.props.success))})),m(p(e),"findLayerSerialNumber",(function(t){var n=t.name;return e.state.initialLayers.findIndex((function(e){return e.name===n}))+1})),m(p(e),"addToMap",(function(){var t=e.props.selected;e.state.useDefaultStyle||(t=d.toVectorStyle(t,e.props.shapeStyle)),P.resolve(e.props.addLayer(t)).then((function(){var t=[];e.props.layers[0].bbox&&e.props.bbox&&(t=[Math.min(e.props.bbox[0],e.props.layers[0].bbox.bounds.minx),Math.min(e.props.bbox[1],e.props.layers[0].bbox.bounds.miny),Math.max(e.props.bbox[2],e.props.layers[0].bbox.bounds.maxx),Math.max(e.props.bbox[3],e.props.layers[0].bbox.bounds.maxy)]),e.state.zoomOnShapefiles&&(e.props.updateBBox(t&&t.length?t:e.props.bbox),e.props.onZoomSelected(t&&t.length?t:e.props.bbox,"EPSG:4326")),e.props.onSuccess(e.props.layers.length>1?e.props.layers[0].name+g.getMessageById(e.context.messages,"shapefile.success"):void 0),e.props.onLayerAdded(e.props.selected)})).catch((function(t){e.props.onError({type:"error",name:e.props.layers[0].name,error:t,message:"shapefile.error.genericLoadError"})}))})),e}return r=M,(a=[{key:"UNSAFE_componentWillMount",value:function(){d=n("./MapStore2/web/client/utils/StyleUtils.js")(this.props.mapType)}},{key:"componentDidMount",value:function(){this.setState({initialLayers:o(this.props.layers)})}},{key:"render",value:function(){var e=this;return b.createElement(x,{role:"body",style:{width:"400px"},fluid:!0},this.props.errors?this.renderError():null,this.props.success?this.renderSuccess():null,b.createElement(j,null,b.createElement("h4",null,b.createElement("span",{style:{fontWeight:"bold"}},b.createElement(h,{msgId:"shapefile.layerOf",msgParams:{count:this.findLayerSerialNumber(this.props.selected),total:this.state.initialLayers.length}}))," ",this.props.selected.name)),b.createElement(j,{key:"styler",style:{marginBottom:10}},this.state.useDefaultStyle?null:this.props.stylers[this.getGeomType(this.props.selected)]),b.createElement(j,{key:"options"},b.createElement(v,{xs:2},b.createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:this.state.useDefaultStyle,onChange:function(t){e.setState({useDefaultStyle:t.target.checked})}})),b.createElement(v,{style:{paddingLeft:0,paddingTop:1},xs:10},b.createElement("label",null,b.createElement(h,{msgId:"shapefile.defaultStyle"}))),b.createElement(v,{xs:2},b.createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:this.state.zoomOnShapefiles,onChange:function(t){e.setState({zoomOnShapefiles:t.target.checked})}})),b.createElement(v,{style:{paddingLeft:0,paddingTop:1},xs:10},b.createElement("label",null,b.createElement(h,{msgId:"shapefile.zoom"})))),b.createElement(j,null,b.createElement(O,{style:{display:"flex",justifyContent:"flex-end"}},b.createElement(w,{bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){e.props.setLayers(null)}},this.props.cancelMessage),b.createElement(w,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){return e.props.onLayerSkipped(e.props.selected)}},this.props.skipMessage),b.createElement(w,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:this.addToMap},1===this.props.layers.length?this.props.finishMessage:this.props.nextMessage))))}}])&&l(r.prototype,a),y&&l(r,y),M}(b.Component);m(M,"propTypes",{bbox:y.array,layers:y.array,selected:y.object,style:y.object,shapeStyle:y.object,onError:y.func,onSuccess:y.func,setLayers:y.func,addLayer:y.func,onSelectLayer:y.func,onLayerAdded:y.func,onLayerSkipped:y.func,onZoomSelected:y.func,updateBBox:y.func,errors:y.array,success:y.string,mapType:y.string,buttonSize:y.string,cancelMessage:y.object,addMessage:y.object,stylers:y.object,nextMessage:y.object,finishMessage:y.object,skipMessage:y.object}),m(M,"contextTypes",{messages:y.object}),m(M,"defaultProps",{mapType:"leaflet",buttonSize:"small",setLayers:function(){},addLayer:function(){},updateBBox:function(){},onZoomSelected:function(){},stylers:{},bbox:null}),e.exports=M},"./MapStore2/web/client/components/style/MarkNameSelector.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/react-widgets/lib/index.js").DropdownList,d=n("./MapStore2/web/client/utils/LocaleUtils.js"),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(y,e);var t,n,r,p,u=(t=y,function(){var e,n=c(t);if(i()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return l(this,e)});function y(){return o(this,y),u.apply(this,arguments)}return n=y,(r=[{key:"render",value:function(){var e=this;return f.createElement(m,{data:[{value:"circle",name:d.getMessageById(this.context.messages,"markNameSelector.circle")||"Circle"},{value:"square",name:d.getMessageById(this.context.messages,"markNameSelector.square")||"Square"},{value:"triangle",name:d.getMessageById(this.context.messages,"markNameSelector.triangle")||"Triangle"},{value:"star",name:d.getMessageById(this.context.messages,"markNameSelector.star")||"Star"},{value:"cross",name:d.getMessageById(this.context.messages,"markNameSelector.cross")||"Cross"},{value:"x",name:d.getMessageById(this.context.messages,"markNameSelector.x")||"X"}],valueField:"value",textField:"name",value:this.props.markName,onChange:function(t){return e.props.onChange("markName",t.value)}})}}])&&a(n.prototype,r),p&&a(n,p),y}(f.Component);p(y,"propTypes",{markName:u.string,onChange:u.func}),p(y,"contextTypes",{messages:u.object}),p(y,"defaultProps",{markName:"circle",onChange:function(){}}),e.exports=y},"./MapStore2/web/client/components/style/StylePoint.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/react-bootstrap/es/index.js"),d=m.Grid,y=m.Row,b=m.Col,h=n("./MapStore2/web/client/components/style/ColorPicker.jsx").default,g=n("./MapStore2/web/client/components/style/StyleCanvas.jsx"),S=n("./MapStore2/web/client/components/style/MarkNameSelector.jsx");n("./node_modules/react-widgets/lib/localizers/simple-number.js")();var x=n("./node_modules/react-widgets/lib/index.js").NumberPicker;n("./node_modules/react-widgets/lib/less/react-widgets.less");var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(m,e);var t,n,r,p,u=(t=m,function(){var e,n=c(t);if(i()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return l(this,e)});function m(){return o(this,m),u.apply(this,arguments)}return n=m,(r=[{key:"render",value:function(){var e=this;return f.createElement(d,{fluid:!0},f.createElement(y,null,f.createElement(b,{xs:4,style:{padding:0}},f.createElement(g,{style:{padding:0,margin:"auto",display:"block"},height:97,shapeStyle:this.props.shapeStyle,geomType:this.props.shapeStyle.marker?"Marker":"Point"})),f.createElement(b,{xs:7},this.props.showMarker?f.createElement(y,null,f.createElement(b,{xs:1},f.createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:this.props.shapeStyle.marker,onChange:function(t){e.props.setStyleParameter("marker",t.target.checked)}})),f.createElement(b,{style:{paddingLeft:0,paddingTop:1},xs:4},f.createElement("label",null,"Marker"))):null,this.props.showMarkSelector?f.createElement(y,{style:{marginBottom:4}},f.createElement(b,{style:{paddingTop:7},xs:4},f.createElement("label",null,"Mark")),f.createElement(b,{xs:8,style:{paddingRight:0,paddingLeft:30}},f.createElement(S,{onChange:this.props.setStyleParameter,markName:this.props.shapeStyle.markName}))):null,f.createElement(y,null,f.createElement(b,{xs:4},f.createElement(h,{disabled:this.props.shapeStyle.marker,value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),f.createElement(b,{xs:8,style:{paddingRight:0,paddingLeft:30}},f.createElement(x,{disabled:this.props.shapeStyle.marker,onChange:function(t){e.props.setStyleParameter("width",t)},min:1,max:15,step:1,value:this.props.shapeStyle.width}))),f.createElement(y,{style:{marginTop:4}},f.createElement(b,{xs:4},f.createElement(h,{disabled:this.props.shapeStyle.marker,value:this.props.shapeStyle.fill,line:!1,text:"Fill",onChangeColor:function(t){t&&e.props.setStyleParameter("fill",t)}})),f.createElement(b,{xs:8,style:{paddingRight:0,paddingLeft:30}},f.createElement(x,{disabled:this.props.shapeStyle.marker,onChange:function(t){e.props.setStyleParameter("radius",t)},min:1,max:50,step:1,value:this.props.shapeStyle.radius}))))))}}])&&a(n.prototype,r),p&&a(n,p),m}(f.Component);p(j,"propTypes",{shapeStyle:u.object,setStyleParameter:u.func,showMarker:u.bool,showMarkSelector:u.bool}),p(j,"defaultProps",{shapeStyle:{},showMarker:!0,showMarkSelector:!1,setStyleParameter:function(){}}),e.exports=j},"./MapStore2/web/client/components/style/StylePolygon.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/react-bootstrap/es/index.js"),d=m.Grid,y=m.Row,b=m.Col,h=n("./MapStore2/web/client/components/style/ColorPicker.jsx").default,g=n("./MapStore2/web/client/components/style/StyleCanvas.jsx");n("./node_modules/react-widgets/lib/localizers/simple-number.js")();var S=n("./node_modules/react-widgets/lib/index.js").NumberPicker;n("./node_modules/react-widgets/lib/less/react-widgets.less");var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(m,e);var t,n,r,p,u=(t=m,function(){var e,n=c(t);if(i()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return l(this,e)});function m(){return o(this,m),u.apply(this,arguments)}return n=m,(r=[{key:"render",value:function(){var e=this;return f.createElement(d,{fluid:!0},f.createElement(y,null,f.createElement(b,{xs:4,style:{padding:0}},f.createElement(g,{style:{padding:0,margin:"auto",display:"block"},shapeStyle:this.props.shapeStyle,geomType:"Polygon"})),f.createElement(b,{xs:7},f.createElement(y,{style:{marginTop:7}},f.createElement(b,{xs:4},f.createElement(h,{value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),f.createElement(b,{xs:8,style:{paddingRight:0,paddingLeft:30}},f.createElement(S,{onChange:function(t){e.props.setStyleParameter("width",t)},min:1,max:15,step:1,value:this.props.shapeStyle.width}))),f.createElement(y,{style:{marginTop:4}},f.createElement(b,{xs:6},f.createElement(h,{value:this.props.shapeStyle.fill,line:!1,text:"Fill",onChangeColor:function(t){t&&e.props.setStyleParameter("fill",t)}}))))))}}])&&a(n.prototype,r),p&&a(n,p),m}(f.Component);p(x,"propTypes",{shapeStyle:u.object,setStyleParameter:u.func}),p(x,"defaultProps",{shapeStyle:{},setStyleParameter:function(){}}),e.exports=x},"./MapStore2/web/client/components/style/StylePolyline.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/react-bootstrap/es/index.js"),d=m.Grid,y=m.Row,b=m.Col,h=n("./MapStore2/web/client/components/style/ColorPicker.jsx").default,g=n("./MapStore2/web/client/components/style/StyleCanvas.jsx");n("./node_modules/react-widgets/lib/localizers/simple-number.js")();var S=n("./node_modules/react-widgets/lib/index.js").NumberPicker;n("./node_modules/react-widgets/lib/less/react-widgets.less");var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(m,e);var t,n,r,p,u=(t=m,function(){var e,n=c(t);if(i()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return l(this,e)});function m(){return o(this,m),u.apply(this,arguments)}return n=m,(r=[{key:"render",value:function(){var e=this;return f.createElement(d,{fluid:!0},f.createElement(y,null,f.createElement(b,{xs:4,style:{padding:0}},f.createElement(g,{style:{padding:0,margin:"auto",display:"block"},shapeStyle:this.props.shapeStyle,geomType:"Polyline",height:40})),f.createElement(b,{xs:7},f.createElement(y,{style:{marginTop:7}},f.createElement(b,{xs:4},f.createElement(h,{value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),f.createElement(b,{xs:8,style:{paddingRight:0,paddingLeft:30}},f.createElement(S,{onChange:function(t){e.props.setStyleParameter("width",t)},min:1,max:15,step:1,value:this.props.shapeStyle.width}))))))}}])&&a(n.prototype,r),p&&a(n,p),m}(f.Component);p(x,"propTypes",{shapeStyle:u.object,setStyleParameter:u.func}),p(x,"defaultProps",{shapeStyle:{},setStyleParameter:function(){}}),e.exports=x},"./MapStore2/web/client/plugins/import/Import.jsx":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.compose,a=r.branch,s=r.mapPropsStream,l=r.renderComponent,i=r.renderNothing,c=n("./node_modules/reselect/es/index.js").createStructuredSelector,p=n("./MapStore2/web/client/components/import/ImportDragZone.jsx"),u=n("./node_modules/react-redux/es/index.js").connect,f=n("./MapStore2/web/client/plugins/import/StyleDialog.jsx"),m=n("./MapStore2/web/client/actions/config.js").configureMap,d=n("./MapStore2/web/client/selectors/map.js").mapSelector;e.exports=o(s((function(e){return e.merge(e.filter((function(e){var t=e.layers;return t&&t.length>0})).exhaustMap((function(){return e.filter((function(e){var t=e.layers;return!t||0===t.length})).take(1).do((function(e){var t=e.onClose,n=void 0===t?function(){}:t;return n&&n()})).ignoreElements()})))})),a((function(e){return!e.enabled}),i),a((function(e){var t=e.layers;return!t||0===t.length}),o(u(c({currentMap:d}),{loadMap:m}),l(p))))(f)},"./MapStore2/web/client/plugins/import/StyleDialog.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react/index.js"),d=n("./MapStore2/web/client/plugins/locale/Message.jsx"),y=n("./MapStore2/web/client/plugins/import/index.js"),b=y.StylePolygon,h=y.StylePolyline,g=y.StylePoint,S=n("./MapStore2/web/client/components/import/style/StylePanel.jsx"),x=n("./MapStore2/web/client/components/misc/StandardDialog.jsx"),j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(y,e);var t,n,r,u,f=(t=y,function(){var e,n=p(t);if(c()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function y(){return a(this,y),f.apply(this,arguments)}return n=y,(r=[{key:"render",value:function(){var e={Polygon:m.createElement(b,null),MultiPolygon:m.createElement(b,null),GeometryCollection:m.createElement(b,null),LineString:m.createElement(h,null),MultiLineString:m.createElement(h,null),MultiPoint:m.createElement(g,null),Point:m.createElement(g,null)},t=m.createElement(S,o({},this.props,{setLayers:this.props.setLayers,stylers:e,uploadMessage:m.createElement(d,{msgId:this.props.uploadMessage}),cancelMessage:m.createElement(d,{msgId:"shapefile.cancel"}),nextMessage:m.createElement(d,{msgId:"shapefile.next"}),finishMessage:m.createElement(d,{msgId:"shapefile.finish"}),skipMessage:m.createElement(d,{msgId:"shapefile.skip"})}));return this.props.layers?m.createElement(x,{id:"import-style-dialog",onClose:this.props.onClose,modal:this.props.modal,show:!0,header:m.createElement(d,{msgId:"shapefile.title"})},t):t}}])&&s(n.prototype,r),u&&s(n,u),y}(m.Component);u(j,"propTypes",{id:f.string,layers:f.array,selected:f.object,style:f.object,shapeStyle:f.object,onError:f.func,setLayers:f.func,addShapeLayer:f.func,onSelectLayer:f.func,onLayerAdded:f.func,error:f.string,mapType:f.string,wrap:f.bool,wrapWithPanel:f.bool,panelStyle:f.object,panelClassName:f.string,visible:f.bool,modal:f.bool,onClose:f.func,closeGlyph:f.string,uploadMessage:f.string,buttonSize:f.string}),u(j,"defaultProps",{id:"mapstore-shapefile-upload",uploadMessage:"shapefile.placeholder",wrap:!0,modal:!0,wrapWithPanel:!1,panelStyle:{minWidth:"360px",zIndex:1995,position:"absolute",overflow:"visible",top:"30px",left:"calc(50% - 150px)"},panelClassName:"toolbar-panel",visible:!1,onClose:function(){},closeGlyph:"1-close",buttonSize:"small"}),e.exports=j},"./MapStore2/web/client/plugins/import/index.js":function(e,t,n){var r=n("./node_modules/react-redux/es/index.js").connect,o=n("./MapStore2/web/client/actions/mapimport.js").onShapeError,a=n("./MapStore2/web/client/actions/style.js").setStyleParameter,s=r((function(e){return{uploadOptions:{error:e.mapimport&&e.mapimport.error||null,loading:e.mapimport&&e.mapimport.loading||!1}}}),{onShapeError:o})(n("./MapStore2/web/client/components/import/ShapefileUploadAndStyle.jsx")),l=r((function(e){return{shapeStyle:e.style||{}}}),{setStyleParameter:a})(n("./MapStore2/web/client/components/style/StylePolygon.jsx")),i=r((function(e){return{shapeStyle:e.style||{}}}),{setStyleParameter:a})(n("./MapStore2/web/client/components/style/StylePoint.jsx")),c=r((function(e){return{shapeStyle:e.style||{}}}),{setStyleParameter:a})(n("./MapStore2/web/client/components/style/StylePolyline.jsx"));e.exports={ShapeFileUploadAndStyle:s,StylePolygon:l,StylePolyline:c,StylePoint:i}},"./MapStore2/web/client/utils sync recursive ^\\.\\/.*\\/StyleUtils$":function(e,t,n){var r={"./leaflet/StyleUtils":"./MapStore2/web/client/utils/leaflet/StyleUtils.js","./openlayers/StyleUtils":"./MapStore2/web/client/utils/openlayers/StyleUtils.js"};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id="./MapStore2/web/client/utils sync recursive ^\\.\\/.*\\/StyleUtils$"},"./MapStore2/web/client/utils/StyleUtils.js":function(e,t,n){e.exports=function(e){var t=n("./MapStore2/web/client/utils sync recursive ^\\.\\/.*\\/StyleUtils$")("./"+e+"/StyleUtils");return{toVectorStyle:t.default||t}}},"./MapStore2/web/client/utils/leaflet/StyleUtils.js":function(e,t,n){var r=n("./node_modules/object-assign/index.js"),o=function(e){return"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")};e.exports=function(e,t){var n=r({},e),a=function(e){return e.features&&e.features[0]?e.features[0].geometry.type:void 0}(e);return!t.marker||"Point"!==a&&"MultiPoint"!==a?n.style={weight:t.width,radius:t.radius,opacity:t.color.a,fillOpacity:t.fill.a,color:o(t.color),fillColor:o(t.fill)}:n.styleName="marker",n}},"./MapStore2/web/client/utils/openlayers/StyleUtils.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/object-assign/index.js"),o=n.n(r),a=n("./node_modules/ol/style/Stroke.js"),s=n("./node_modules/ol/style/Fill.js"),l=n("./node_modules/ol/style/Style.js"),i=n("./node_modules/ol/style/Circle.js"),c=function(e){return"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a,")")},p=function(e){return e.features&&e.features[0]?e.features[0].geometry.type:void 0};t.default=function(e,t){var n=o()({},e),r=p(e);if(!t.marker||"Point"!==r&&"MultiPoint"!==r){n.style={weight:t.width,radius:t.radius,opacity:t.color.a,fillOpacity:t.fill.a,color:c(t.color),fillColor:c(t.fill)};var u=new a.default({color:c(t.color),width:t.width}),f=new s.default({color:c(t.fill)});switch(p(e)){case"Polygon":case"MultiPolygon":n.nativeStyle=new l.default({stroke:u,fill:f});break;case"MultiLineString":case"LineString":n.nativeStyle=new l.default({stroke:u});break;case"Point":case"MultiPoint":n.nativeStyle=new l.default({image:new i.default({radius:t.radius,fill:f,stroke:u})});break;case"GeometryCollection":n.nativeStyle=new l.default({radius:t.radius,stroke:u,fill:f,image:new i.default({radius:t.radius,fill:f,stroke:u})});break;default:n.style=null}}else n.styleName="marker",n.handleClickOnLayer=!0;return n}}}]);