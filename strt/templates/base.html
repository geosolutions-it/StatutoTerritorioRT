<!--

Copyright 2018, GeoSolutions Sas.
All rights reserved.

This source code is licensed under the BSD-style license found in the
LICENSE file in the root directory of this source tree.

-->


<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">

    {% load static %}
    {% load i18n %}

    <head>

        <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">

        <title>{% block head_title %}Statuto Territorio RT{% endblock head_title %}</title>

        <!-- CSS -->
        <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}"/>
        <link rel="stylesheet" href="{% static 'base/css/base.css' %}"/>
        {% block styles %}{# CSS space #}{% endblock styles %}

    </head>

    <body>

        <!-- CONTAINER-FLUID -->
        <div class="container-fluid">

            <!-- TOP-NAVBAR -->
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top p-0">

                <!-- BRAND -->
                <a class="navbar-brand p-0" href="/">
                    <img src="{% static 'img/RT_logo.png' %}" alt="RT Logo"
                        class="d-inline-block img-fluid rt-logo p-0">
                    <span class="d-none d-lg-inline-block pl-2">
                        {% trans 'Portale del Territorio' %}
                    </span>
                </a><!-- end BRAND -->

                <!-- TOGGLER BUTTON -->
                <button class="navbar-toggler m-2" type="button" data-toggle="collapse"
                    data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button><!-- end TOGGLER BUTTON -->

                <!-- NAVBAR COLLPSABLE CONTENT -->
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ml-auto pl-2">
                        <li class="nav-item">
                            <a class="nav-link text-white" href="{% url 'private_area' %}">
                                <span>{% trans 'area riservata'|capfirst %}</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="{% url 'geoportal' %}">
                                <span>{% trans 'geoportale'|upper %}</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="{% url 'opendata' %}">
                                <span>{% trans 'open data'|upper %}</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="{% url 'glossary' %}">
                                <span>{% trans 'glossario'|upper %}</span>
                            </a>
                        </li>
                    </ul>
                </div><!-- end NAVBAR COLLPSABLE CONTENT -->

            </nav><!-- end TOP-NAVBAR -->

            <!-- USER-NAV -->
            {% if request.user.is_authenticated %}

                <ul class="user-nav nav navbar-secondary fixed-top justify-content-between bg-secondary p-0">

                    <li class="nav-item p-2">
                        <a class="nav-link" id="sidebar-toggler">
                            <span class="navbar-toggler-icon sidebar-toggler-icon"></span>
                        </a>
                    </li>

                    <li class="nav-item dropdown text-white bg-secondary">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="/" role="button"
                           aria-haspopup="true" aria-expanded="false">
                            {{ request.user.get_full_name }}
                        </a>
                        <div class="dropdown-menu bg-secondary dropdown-menu-right">
                            <a class="dropdown-item text-warning pb-1 pb-lg-3" href="/">
                                {% trans 'ruolo'|upper %}: {{ membership_type.name }}
                            </a>
                            <a class="dropdown-item text-white" href="/">
                                {% trans 'profilo'|capfirst %}
                            </a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item text-white" href="/">
                                {% trans 'impostazioni'|capfirst %}
                            </a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item text-white" href="{% url 'logout' %}">
                                {% trans 'logout'|capfirst %}
                            </a>
                        </div>
                    </li>

                </ul>

                <ul class="nav sidebar bg-secondary border-top border-light fixed-top
                    flex-column text-light" id="accordion">
                    <li id="headingOne" class="nav-item p-2">
                        <a data-toggle="collapse" data-target="#collapseOne"
                           aria-expanded="true" aria-controls="collapseOne">
                            {% trans 'gestione utenti'|capfirst %}
                        </a>
                    </li>
                    <li id="collapseOne" class="collapse nav-item border-top
                        border-bottom border-light p-2 pl-3"
                        aria-labelledby="headingOne" data-parent="#accordion">
                        <a href="{% url 'users_list' %}" class="d-block pb-2">
                            {% trans 'lista utenti'|capfirst %}
                        </a>
                        <a href="{% url 'users_membership_list' %}" class="d-block pb-2">
                            {% trans 'lista ruoli'|capfirst %}
                        </a>
                        <a href="{% url 'user_registration' %}" class="d-block pb-2">
                            {% trans 'registra utente'|capfirst %}
                        </a>
                        <a href="{% url 'user_membership_registration' %}" class="d-block">
                            {% trans 'registra ruolo'|capfirst %}
                        </a>
                    </li>
                    <li class="nav-item p-2">
                        <a href="{% url 'serapide' %}">
                            {% trans 'serapide'|capfirst %}
                        </a>
                    </li>
                </ul>

            {% endif %}
            <!-- end USER-NAV -->

            <!-- CONTENT -->
            <div class="content bg-light">

                <!-- start content block -->
                {% block content %}

                    <!-- put the content here -->

                {% endblock content %}
                <!-- end content block -->

            </div> <!-- end CONTENT -->

            <!-- FOOTER -->
            <div class="footer footer-padding-trans bg-light w-100">
                <div class="row p-2 m-0 text-secondary">
                    <div class="col-12 col-lg-1 m-0 p-0 text-uppercase">{% trans 'contatti' %}</div>
                    <div class="col-12 col-lg-2 p-lg-0 m-lg-0">
                        <br class="d-none d-lg-inline">
                        <div class="row">
                            <div class="col-12 p-0 m-0">
                                <small>+345 678 903</small>
                            </div>
                            <div class="col-12 p-0 m-0">
                                <a href="/">
                                    <small>email@pianificazioneterritoriale.it</small>
                                </a>
                            </div>
                            <div class="col-12 p-0 m-0">
                                <a href="/">
                                    <small>...</small>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-lg-1 p-0 m-0 text-uppercase">{% trans 'supporto' %}</div>
                    <div class="col-12 col-lg-2 p-lg-0 m-lg-0">
                        <br class="d-none d-lg-inline">
                        <div class="row">
                            <div class="col-12 p-0 m-0">
                                <a href="/">
                                    <small>{% trans 'documentazione'|capfirst %}</small>
                                </a>
                            </div>
                            <div class="col-12 p-0 m-0">
                                <a href="/">
                                    <small>{% trans 'WIKI' %}</small>
                                </a>
                            </div>
                            <div class="col-12 p-0 m-0">
                                <a href="/">
                                    <small>{% trans 'FAQ' %}</small>
                                </a>
                            </div>
                            <div class="col-12 p-0 m-0">
                                <a href="/">
                                    <small>{% trans 'tutorial'|capfirst %}</small>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-lg-1 p-0 m-0 text-uppercase">{% trans 'informazioni' %}</div>
                    <div class="col-12 col-lg-2 p-lg-0 m-lg-0">
                        <br class="d-none d-lg-inline">
                        <div class="row">
                            <div class="col-12 p-0 m-0">
                                <a href="/">
                                    <small>{% trans 'Privacy Policy'|capfirst %}</small>
                                </a>
                            </div>
                            <div class="col-12 p-0 m-0">
                                <a href="/">
                                    <small>{% trans 'Termini & condizioni'|capfirst %}</small>
                                </a>
                            </div>
                            <div class="col-12 p-0 m-0">
                                <a href="/">
                                    <small>{% trans 'Ufficio Stampa'|capfirst %}</small>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-lg-3 text-right align-self-end">
                        <small>{% trans '@ Regione Toscana'|capfirst %}</small>
                    </div>
                </div>
            </div> <!-- end FOOTER -->

        </div> <!-- end CONTAINER-FLUID -->

        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
        <script src="{% static 'js/popper.min.js' %}"></script>
        <script src="{% static 'js/bootstrap.min.js' %}"></script>

        <script>

            // If user-nav is visible (user logged in)
            if ($('.user-nav').length > 0) {
                $('.content').css('padding-top', '120px');
                $('.content').css('padding-left', '250px');
                $('.footer').css('padding-left', '250px');
                let ww = $(window).width();
                if (ww < 1199.98) {
                    $('.sidebar').hide();
                    $('.content').css('padding-left', '0px');
                    $('.footer').css('padding-left', '0px');
                }
                $('#sidebar-toggler').click(function() {
                    if ($('.sidebar').is(':visible')) {
                        $('.sidebar').fadeOut(500);
                        $('.content').css('padding-left', '0px');
                        $('.footer').css('padding-left', '0px');
                    } else {
                        $('.sidebar').fadeIn(500);
                        let sw = $('.sidebar').width();
                        let spl = $('.sidebar').css('padding-left');
                        let tot = sw + parseFloat(spl.replace('px',''));
                        $('.content').css('padding-left', tot + 'px');
                        $('.footer').css('padding-left', tot + 'px');
                    }
                });
            }

        </script>

        {% block add_script %}{# JS script space #}{% endblock add_script %}

    </body>

</html>
